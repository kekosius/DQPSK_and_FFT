\doxysection{Documents/\+Keil/\+DQPSK\+\_\+plus\+\_\+\+Freq/\+Source/\+LCD\+\_\+lib.c File Reference}
\hypertarget{_l_c_d__lib_8c}{}\label{_l_c_d__lib_8c}\index{Documents/Keil/DQPSK\_plus\_Freq/Source/LCD\_lib.c@{Documents/Keil/DQPSK\_plus\_Freq/Source/LCD\_lib.c}}


Функции для работы с LCD экраном  


{\ttfamily \#include \"{}LCD\+\_\+lib.\+h\"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_affd4a185dd859d8f300c9acd37b65115}{LCD\+\_\+\+Voltage\+\_\+\+Result}} (uint16\+\_\+t x\+\_\+pos, uint16\+\_\+t y\+\_\+pos, double AvgV)
\begin{DoxyCompactList}\small\item\em Отображение результата анализа амлитуды принятого сигнала на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a5ef93ea663540adb55fb253fa41478c9}{LCD\+\_\+\+Start}} ()
\begin{DoxyCompactList}\small\item\em Запускает LCD экран \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_ab589cadffbb3a4300057f868e30a910f}{LCD\+\_\+\+DQPSK\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em Переводит LCD экран в режим отображения АРСФ кодов \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a67d65e7546dc387e220507035c7c4346}{LCD\+\_\+\+DQPSK\+\_\+\+Result}} (uint16\+\_\+t code, uint16\+\_\+t speed, double AvgV)
\begin{DoxyCompactList}\small\item\em Отображения результата декодирования АРСФ на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a84301f23dd4c003654d6c44781b4017e}{LCD\+\_\+\+Freq\+\_\+mode}} ()
\begin{DoxyCompactList}\small\item\em Переводит LCD экран в режим отображения АРС кодов \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a9d046a321b80f763b5cdf78b26c0fbe2}{LCD\+\_\+\+Freq\+\_\+\+Result}} (uint16\+\_\+t freq, double AvgV)
\begin{DoxyCompactList}\small\item\em Отображения результата декодирования АРС на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_ad4fcbc10f1d0f8b3738d929d33386ccc}{LCD\+\_\+\+Show\+\_\+\+No\+\_\+\+Result}} ()
\begin{DoxyCompactList}\small\item\em Отображение состояния \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_ac649c9a194e457f7a19801c035932848}{LCD\+\_\+\+Result\+\_\+\+Reset}} ()
\begin{DoxyCompactList}\small\item\em Очищает информацию о предыдущих полученных результатах \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a83784927feb59f3a527130ac4b016fac}{LCD\+\_\+\+GPIO\+\_\+\+Config}} ()
\begin{DoxyCompactList}\small\item\em Инициализация GPIO ножек для работы с LCD экраном \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_ab707bc0094d1ca14242bff04487554d3}{fill\+Rectangle}} (uint16\+\_\+t x0, uint16\+\_\+t y0, uint16\+\_\+t x1, uint16\+\_\+t y1, uint16\+\_\+t color)
\begin{DoxyCompactList}\small\item\em Отрисовка прямоугольника с заливкой на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a69f8a72ddcde36584c0e0f7fc70afeac}{draw\+Picture}} (uint16\+\_\+t x0, uint16\+\_\+t y0, const uint16\+\_\+t \texorpdfstring{$\ast$}{*}img)
\begin{DoxyCompactList}\small\item\em Отрисовка изображения на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_aef7cb8fcade6bcf4d819c03368dfe239}{draw\+String}} (uint16\+\_\+t x0, uint16\+\_\+t y0, uint16\+\_\+t color, uint16\+\_\+t Background, uint8\+\_\+t str\mbox{[}$\,$\mbox{]}\mbox{[}3\mbox{]}, uint8\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Вывод на экран строки символов \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a5bcfb20df057ac3e00c58fe98224e7ca}{draw\+Float\+Mono\+Width}} (uint16\+\_\+t x0, uint16\+\_\+t y0, uint16\+\_\+t color, uint16\+\_\+t Background, uint8\+\_\+t str\mbox{[}$\,$\mbox{]}\mbox{[}3\mbox{]}, uint8\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Вывод на экран дробного числа \end{DoxyCompactList}\item 
struct Symbol \mbox{\hyperlink{_l_c_d__lib_8c_a9f668ffb29a5a9c9d80c6f1607486acb}{draw\+Char}} (uint16\+\_\+t x, uint16\+\_\+t y, uint8\+\_\+t \texorpdfstring{$\ast$}{*}c, uint16\+\_\+t color, uint16\+\_\+t Background)
\begin{DoxyCompactList}\small\item\em Вывод на экран дробного числа \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a942a6990076b55062fa3686509ede8fb}{set\+Draw\+Window}} (uint16\+\_\+t x1, uint16\+\_\+t y1, uint16\+\_\+t x2, uint16\+\_\+t y2)
\begin{DoxyCompactList}\small\item\em Установка окна для отрисовки на LCD экране \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a08529d00f32f8441dc7669b1a1d3783c}{init\+LCD}} ()
\begin{DoxyCompactList}\small\item\em Инициализация LCD экрана \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_aa6a149ffc7e5d86e8956ce99913378c0}{hw\+Reset\+LCD}} (void)
\begin{DoxyCompactList}\small\item\em hardware перезагрузка LCD экрана \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_ab82572385c650de496f697c0afa2d7cc}{sw\+Reset\+LCD}} (void)
\begin{DoxyCompactList}\small\item\em software перезагрузка LCD экрана \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_aabad06e989a5bc1992d5d136d02dc6cb}{on\+LCD}} (void)
\begin{DoxyCompactList}\small\item\em Включение LCD экрана \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a58da74816ca00e0067c30b4faaefc366}{off\+LCD}} (void)
\begin{DoxyCompactList}\small\item\em Выключение LCD экрана \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_a3a4fcfdf4679d8219ab6281e3a7d637b}{write\+Cmd\+LCD}} (uint8\+\_\+t cmd)
\begin{DoxyCompactList}\small\item\em Отправка команды на контроллер LCD экрана ILI9488. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_l_c_d__lib_8c_abe8aedbfc99ec82625d07c7e027ef5bd}{write\+Data\+LCD}} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Отправка данных (параметров команд) на контроллер LCD экрана ILI9488. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{_l_c_d__lib_8c_a1e6fddd7ada8e93fa228d12fc03a4a99}\label{_l_c_d__lib_8c_a1e6fddd7ada8e93fa228d12fc03a4a99} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Start\+\_\+1} \mbox{[}7\mbox{]}\mbox{[}3\mbox{]} = \{\"{}Н\"{}, \"{}А\"{}, \"{}Ж\"{}, \"{}М\"{}, \"{}И\"{}, \"{}Т\"{}, \"{}Е\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_ab6b7c41c9e16462bf69ac623195045de}\label{_l_c_d__lib_8c_ab6b7c41c9e16462bf69ac623195045de} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Start\+\_\+2} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}К\"{}, \"{}Е\"{}, \"{}У\"{}, \"{}1\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a49201d9f82bd728b8347e21ce7622841}\label{_l_c_d__lib_8c_a49201d9f82bd728b8347e21ce7622841} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+DQPSK\+\_\+1} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}А\"{}, \"{}Р\"{}, \"{}С\"{}, \"{}Ф\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a275590b7c08195db7ed41dd75ea2f51d}\label{_l_c_d__lib_8c_a275590b7c08195db7ed41dd75ea2f51d} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+DQPSK\+\_\+2} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}К\"{}, \"{}О\"{}, \"{}Д\"{}, \"{}\+:\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a4161c803bfec47485624ccf99dc02dc8}\label{_l_c_d__lib_8c_a4161c803bfec47485624ccf99dc02dc8} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+DQPSK\+\_\+3} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}К\"{}, \"{}Р\"{}, \"{}Ц\"{}, \"{}\+:\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_aa97463b01ee1ca9a841a7a8e9d6c52ea}\label{_l_c_d__lib_8c_aa97463b01ee1ca9a841a7a8e9d6c52ea} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+DQPSK\+\_\+4} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}С\"{}, \"{}Р\"{}, \"{}Ц\"{}, \"{}\+:\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a1512ca89a90c98f801bf4929a7fa4a5e}\label{_l_c_d__lib_8c_a1512ca89a90c98f801bf4929a7fa4a5e} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+DQPSK\+\_\+5} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}А\"{}, \"{}М\"{}, \"{}П\"{}, \"{}\+:\"{}\}
\item 
uint16\+\_\+t \mbox{\hyperlink{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58}{prev\+Code}} = 0x999
\item 
uint8\+\_\+t \mbox{\hyperlink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter}} = 3
\item 
uint8\+\_\+t \mbox{\hyperlink{_l_c_d__lib_8c_ac24684fc351237f8c32cad80903246bc}{No\+Result\+State}} = 0
\item 
\Hypertarget{_l_c_d__lib_8c_a8414fee3c222c507a19fcc0c45a78ce6}\label{_l_c_d__lib_8c_a8414fee3c222c507a19fcc0c45a78ce6} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Freq\+\_\+1} \mbox{[}3\mbox{]}\mbox{[}3\mbox{]} = \{\"{}А\"{}, \"{}Р\"{}, \"{}С\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a39afe69a6767afdb305e55063402e3bf}\label{_l_c_d__lib_8c_a39afe69a6767afdb305e55063402e3bf} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Freq\+\_\+2} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}К\"{}, \"{}О\"{}, \"{}Д\"{}, \"{}\+:\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a26d95aa5493baa88f0fb144d869909e4}\label{_l_c_d__lib_8c_a26d95aa5493baa88f0fb144d869909e4} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Freq\+\_\+3} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}К\"{}, \"{}Р\"{}, \"{}Ц\"{}, \"{}\+:\"{}\}
\item 
\Hypertarget{_l_c_d__lib_8c_a998aedff24650478e4c94c9f49ca0753}\label{_l_c_d__lib_8c_a998aedff24650478e4c94c9f49ca0753} 
uint8\+\_\+t {\bfseries MSG\+\_\+\+Freq\+\_\+6} \mbox{[}4\mbox{]}\mbox{[}3\mbox{]} = \{\"{}А\"{}, \"{}М\"{}, \"{}П\"{}, \"{}\+:\"{}\}
\item 
uint8\+\_\+t \mbox{\hyperlink{_l_c_d__lib_8c_a5f071743f113001f88bdc3771ee01a93}{buf}} \mbox{[}LCD\+\_\+\+WIDTH \texorpdfstring{$\ast$}{*}2\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Функции для работы с LCD экраном 

\begin{DoxyVersion}{Version}
V1.\+0.\+0
\end{DoxyVersion}
\begin{DoxyDate}{Date}
12-\/09-\/2023 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\Hypertarget{_l_c_d__lib_8c_a9f668ffb29a5a9c9d80c6f1607486acb}\label{_l_c_d__lib_8c_a9f668ffb29a5a9c9d80c6f1607486acb} 
\index{LCD\_lib.c@{LCD\_lib.c}!drawChar@{drawChar}}
\index{drawChar@{drawChar}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{drawChar()}{drawChar()}}
{\footnotesize\ttfamily struct Symbol draw\+Char (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x,  }\item[{uint16\+\_\+t}]{y,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{c,  }\item[{uint16\+\_\+t}]{color,  }\item[{uint16\+\_\+t}]{Background }\end{DoxyParamCaption})}



Вывод на экран дробного числа 


\begin{DoxyParams}{Parameters}
{\em x0} & точка начала отрисовки по оси х \\
\hline
{\em y0} & точка начала отрисовки по оси y \\
\hline
{\em с} & символов-\/строка в формате UTF-\/8 \\
\hline
{\em color} & цвет заливки символов в формате RGB565 \\
\hline
{\em Background} & цвет заливки фона в формате RGB565\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Symbol symbol структура, описывающая отрисованный символ. Подробнее описана в \doxylink{font__lib_8c_a9babcbfe804efab81f10a42e488dbe73}{get\+Offset}
\end{DoxyReturn}
Выводит на экран символ с заданным цветом color, закрашивает фон цветом Background \Hypertarget{_l_c_d__lib_8c_a5bcfb20df057ac3e00c58fe98224e7ca}\label{_l_c_d__lib_8c_a5bcfb20df057ac3e00c58fe98224e7ca} 
\index{LCD\_lib.c@{LCD\_lib.c}!drawFloatMonoWidth@{drawFloatMonoWidth}}
\index{drawFloatMonoWidth@{drawFloatMonoWidth}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{drawFloatMonoWidth()}{drawFloatMonoWidth()}}
{\footnotesize\ttfamily void draw\+Float\+Mono\+Width (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x0,  }\item[{uint16\+\_\+t}]{y0,  }\item[{uint16\+\_\+t}]{color,  }\item[{uint16\+\_\+t}]{Background,  }\item[{uint8\+\_\+t}]{str\mbox{[}$\,$\mbox{]}\mbox{[}3\mbox{]},  }\item[{uint8\+\_\+t}]{len }\end{DoxyParamCaption})}



Вывод на экран дробного числа 


\begin{DoxyParams}{Parameters}
{\em x0} & точка начала отрисовки по оси х \\
\hline
{\em y0} & точка начала отрисовки по оси y \\
\hline
{\em color} & цвет заливки символов в формате RGB565 \\
\hline
{\em Background} & цвет заливки фона в формате RGB565 \\
\hline
{\em str} & массив символов-\/строк в формате UTF-\/8, образующий отрисовываемую строку \\
\hline
{\em len} & количество символов-\/строк, образующих отрисовываемую строку\\
\hline
\end{DoxyParams}
Выводит на экран дробное число в формате X.\+XX, которое всегда будет одинаковой ширины \Hypertarget{_l_c_d__lib_8c_a69f8a72ddcde36584c0e0f7fc70afeac}\label{_l_c_d__lib_8c_a69f8a72ddcde36584c0e0f7fc70afeac} 
\index{LCD\_lib.c@{LCD\_lib.c}!drawPicture@{drawPicture}}
\index{drawPicture@{drawPicture}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{drawPicture()}{drawPicture()}}
{\footnotesize\ttfamily void draw\+Picture (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x0,  }\item[{uint16\+\_\+t}]{y0,  }\item[{const uint16\+\_\+t \texorpdfstring{$\ast$}{*}}]{img }\end{DoxyParamCaption})}



Отрисовка изображения на LCD экране 


\begin{DoxyParams}{Parameters}
{\em x0} & точка начала отрисовки по оси х \\
\hline
{\em y0} & точка начала отрисовки по оси y \\
\hline
{\em img} & ссылка на массив, содержащий изображение для отрисовки.\\
\hline
\end{DoxyParams}
Выводит на экран изображение в заданной позиции. \Hypertarget{_l_c_d__lib_8c_aef7cb8fcade6bcf4d819c03368dfe239}\label{_l_c_d__lib_8c_aef7cb8fcade6bcf4d819c03368dfe239} 
\index{LCD\_lib.c@{LCD\_lib.c}!drawString@{drawString}}
\index{drawString@{drawString}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{drawString()}{drawString()}}
{\footnotesize\ttfamily void draw\+String (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x0,  }\item[{uint16\+\_\+t}]{y0,  }\item[{uint16\+\_\+t}]{color,  }\item[{uint16\+\_\+t}]{Background,  }\item[{uint8\+\_\+t}]{str\mbox{[}$\,$\mbox{]}\mbox{[}3\mbox{]},  }\item[{uint8\+\_\+t}]{len }\end{DoxyParamCaption})}



Вывод на экран строки символов 


\begin{DoxyParams}{Parameters}
{\em x0} & точка начала отрисовки по оси х \\
\hline
{\em y0} & точка начала отрисовки по оси y \\
\hline
{\em color} & цвет заливки символов в формате RGB565 \\
\hline
{\em Background} & цвет заливки фона в формате RGB565 \\
\hline
{\em str} & массив символов-\/строк в формате UTF-\/8, образующий отрисовываемую строку \\
\hline
{\em len} & количество символов-\/строк, образующих отрисовываемую строку\\
\hline
\end{DoxyParams}
Выводит на экран строку символов с постоянным расстоянием (8 пикселей) между символами \Hypertarget{_l_c_d__lib_8c_ab707bc0094d1ca14242bff04487554d3}\label{_l_c_d__lib_8c_ab707bc0094d1ca14242bff04487554d3} 
\index{LCD\_lib.c@{LCD\_lib.c}!fillRectangle@{fillRectangle}}
\index{fillRectangle@{fillRectangle}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{fillRectangle()}{fillRectangle()}}
{\footnotesize\ttfamily void fill\+Rectangle (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x0,  }\item[{uint16\+\_\+t}]{y0,  }\item[{uint16\+\_\+t}]{x1,  }\item[{uint16\+\_\+t}]{y1,  }\item[{uint16\+\_\+t}]{color }\end{DoxyParamCaption})}



Отрисовка прямоугольника с заливкой на LCD экране 


\begin{DoxyParams}{Parameters}
{\em x0} & точка начала отрисовки по оси х \\
\hline
{\em y0} & точка начала отрисовки по оси y \\
\hline
{\em x1} & точка конца отрисовки по оси х \\
\hline
{\em y1} & точка конца отрисовки по оси y \\
\hline
{\em color} & цвет заливки в формате RGB565\\
\hline
\end{DoxyParams}
Выводит на экран прямоугольник с заливкой в заданной позиции. \Hypertarget{_l_c_d__lib_8c_aa6a149ffc7e5d86e8956ce99913378c0}\label{_l_c_d__lib_8c_aa6a149ffc7e5d86e8956ce99913378c0} 
\index{LCD\_lib.c@{LCD\_lib.c}!hwResetLCD@{hwResetLCD}}
\index{hwResetLCD@{hwResetLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{hwResetLCD()}{hwResetLCD()}}
{\footnotesize\ttfamily void hw\+Reset\+LCD (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



hardware перезагрузка LCD экрана 

Функция устанавливает уровень Low на линии LCD\+\_\+\+RST и после некоторой задержки выставляет уровень High, что вызывает hardware перезагрузку LCD экрана. \Hypertarget{_l_c_d__lib_8c_a08529d00f32f8441dc7669b1a1d3783c}\label{_l_c_d__lib_8c_a08529d00f32f8441dc7669b1a1d3783c} 
\index{LCD\_lib.c@{LCD\_lib.c}!initLCD@{initLCD}}
\index{initLCD@{initLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{initLCD()}{initLCD()}}
{\footnotesize\ttfamily void init\+LCD (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Инициализация LCD экрана 

Функция отправляет команды на чип ILI9488 по шине SPI для установки необходимого режима работы LCD экрана \Hypertarget{_l_c_d__lib_8c_ab589cadffbb3a4300057f868e30a910f}\label{_l_c_d__lib_8c_ab589cadffbb3a4300057f868e30a910f} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_DQPSK\_mode@{LCD\_DQPSK\_mode}}
\index{LCD\_DQPSK\_mode@{LCD\_DQPSK\_mode}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_DQPSK\_mode()}{LCD\_DQPSK\_mode()}}
{\footnotesize\ttfamily void LCD\+\_\+\+DQPSK\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Переводит LCD экран в режим отображения АРСФ кодов 

Закрашивает экран в белый, выводит на экран обозначение режима работы (MSG\+\_\+\+DQPSK\+\_\+1) и поля для отображения результатов АРСФ декодирования (MSG\+\_\+\+DQPSK\+\_\+2, MSG\+\_\+\+DQPSK\+\_\+3, MSG\+\_\+\+DQPSK\+\_\+4, MSG\+\_\+\+DQPSK\+\_\+5). Также сбрасывает счётчик \doxylink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter} таймера TIM4. \Hypertarget{_l_c_d__lib_8c_a67d65e7546dc387e220507035c7c4346}\label{_l_c_d__lib_8c_a67d65e7546dc387e220507035c7c4346} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_DQPSK\_Result@{LCD\_DQPSK\_Result}}
\index{LCD\_DQPSK\_Result@{LCD\_DQPSK\_Result}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_DQPSK\_Result()}{LCD\_DQPSK\_Result()}}
{\footnotesize\ttfamily void LCD\+\_\+\+DQPSK\+\_\+\+Result (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{code,  }\item[{uint16\+\_\+t}]{speed,  }\item[{double}]{AvgV }\end{DoxyParamCaption})}



Отображения результата декодирования АРСФ на LCD экране 


\begin{DoxyParams}{Parameters}
{\em code} & декодированный hex код \\
\hline
{\em speed} & разрешённая на участке скорость в формате десятеричного числа\mbox{[}XXYY\mbox{]}, где XX -\/ разрешенная скорость на КРЦ, YY -\/ разрешенная скорость на СРЦ \\
\hline
{\em AvgV} & средняя амплитуда принятого сигнала\\
\hline
\end{DoxyParams}
Если code код равен \doxylink{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58}{prev\+Code}, то выводит только AvgV (предыдущие показания code, speed остаются на экране).

Также при каждом вызове обновляет счетчик \doxylink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter} \Hypertarget{_l_c_d__lib_8c_a84301f23dd4c003654d6c44781b4017e}\label{_l_c_d__lib_8c_a84301f23dd4c003654d6c44781b4017e} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Freq\_mode@{LCD\_Freq\_mode}}
\index{LCD\_Freq\_mode@{LCD\_Freq\_mode}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Freq\_mode()}{LCD\_Freq\_mode()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Freq\+\_\+mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Переводит LCD экран в режим отображения АРС кодов 

Закрашивает экран в белый, выводит на экран обозначение режима работы (MSG\+\_\+\+Freq\+\_\+1) и поля для отображения результатов АРС декодирования (MSG\+\_\+\+Freq\+\_\+2, MSG\+\_\+\+Freq\+\_\+3, MSG\+\_\+\+Freq\+\_\+6). Также сбрасывает счётчик \doxylink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter} таймера TIM4. \Hypertarget{_l_c_d__lib_8c_a9d046a321b80f763b5cdf78b26c0fbe2}\label{_l_c_d__lib_8c_a9d046a321b80f763b5cdf78b26c0fbe2} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Freq\_Result@{LCD\_Freq\_Result}}
\index{LCD\_Freq\_Result@{LCD\_Freq\_Result}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Freq\_Result()}{LCD\_Freq\_Result()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Freq\+\_\+\+Result (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{freq,  }\item[{double}]{AvgV }\end{DoxyParamCaption})}



Отображения результата декодирования АРС на LCD экране 


\begin{DoxyParams}{Parameters}
{\em freq} & доминирующая частота, полученная в результате спектрального анализа \\
\hline
{\em AvgV} & средняя амплитуда принятого сигнала\\
\hline
\end{DoxyParams}
Если code код равен \doxylink{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58}{prev\+Code}, то выводит только AvgV (предыдущие показания freq остаются на экране).

Также при каждом вызове обновляет счетчик \doxylink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter} \Hypertarget{_l_c_d__lib_8c_a83784927feb59f3a527130ac4b016fac}\label{_l_c_d__lib_8c_a83784927feb59f3a527130ac4b016fac} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_GPIO\_Config@{LCD\_GPIO\_Config}}
\index{LCD\_GPIO\_Config@{LCD\_GPIO\_Config}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_GPIO\_Config()}{LCD\_GPIO\_Config()}}
{\footnotesize\ttfamily void LCD\+\_\+\+GPIO\+\_\+\+Config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Инициализация GPIO ножек для работы с LCD экраном 

Дефолтные значения пинов\+:
\begin{DoxyItemize}
\item PC4 (LCD\+\_\+\+BL) -\/ High
\item PC5 (LCD\+\_\+\+RST) -\/ High
\item PB0 (LCD\+\_\+\+DC) -\/ Low
\item PB1 (LCD\+\_\+\+CS) -\/ Low 
\end{DoxyItemize}\Hypertarget{_l_c_d__lib_8c_ac649c9a194e457f7a19801c035932848}\label{_l_c_d__lib_8c_ac649c9a194e457f7a19801c035932848} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Result\_Reset@{LCD\_Result\_Reset}}
\index{LCD\_Result\_Reset@{LCD\_Result\_Reset}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Result\_Reset()}{LCD\_Result\_Reset()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Result\+\_\+\+Reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Очищает информацию о предыдущих полученных результатах 

Функция возвращает переменные \doxylink{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58}{prev\+Code}, \doxylink{_l_c_d__lib_8c_ac24684fc351237f8c32cad80903246bc}{No\+Result\+State} и \doxylink{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}{No\+Result\+Counter} к дефолтным значениям \Hypertarget{_l_c_d__lib_8c_ad4fcbc10f1d0f8b3738d929d33386ccc}\label{_l_c_d__lib_8c_ad4fcbc10f1d0f8b3738d929d33386ccc} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Show\_No\_Result@{LCD\_Show\_No\_Result}}
\index{LCD\_Show\_No\_Result@{LCD\_Show\_No\_Result}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Show\_No\_Result()}{LCD\_Show\_No\_Result()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Show\+\_\+\+No\+\_\+\+Result (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Отображение состояния 


\begin{DoxyParams}{Parameters}
{\em x\+\_\+pos} & точка начала отрисовки по оси х \\
\hline
{\em y\+\_\+pos} & точка начала отрисовки по оси y \\
\hline
{\em AvgV} & средняя амплитуда принятого сигнала\\
\hline
\end{DoxyParams}
Выводит на на белом фоне в заданной позиции double с точностью два знака после запятой в формате X.\+XX \Hypertarget{_l_c_d__lib_8c_a5ef93ea663540adb55fb253fa41478c9}\label{_l_c_d__lib_8c_a5ef93ea663540adb55fb253fa41478c9} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Start@{LCD\_Start}}
\index{LCD\_Start@{LCD\_Start}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Start()}{LCD\_Start()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Запускает LCD экран 

Вызывает \doxylink{_l_c_d__lib_8c_a83784927feb59f3a527130ac4b016fac}{LCD\+\_\+\+GPIO\+\_\+\+Config()}, \doxylink{_l_c_d__lib_8c_a08529d00f32f8441dc7669b1a1d3783c}{init\+LCD()}, закрашивает экран в белый, выводит на экран стартовое сообщение (MSG\+\_\+\+Start\+\_\+1, MSG\+\_\+\+Start\+\_\+2) \Hypertarget{_l_c_d__lib_8c_affd4a185dd859d8f300c9acd37b65115}\label{_l_c_d__lib_8c_affd4a185dd859d8f300c9acd37b65115} 
\index{LCD\_lib.c@{LCD\_lib.c}!LCD\_Voltage\_Result@{LCD\_Voltage\_Result}}
\index{LCD\_Voltage\_Result@{LCD\_Voltage\_Result}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{LCD\_Voltage\_Result()}{LCD\_Voltage\_Result()}}
{\footnotesize\ttfamily void LCD\+\_\+\+Voltage\+\_\+\+Result (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x\+\_\+pos,  }\item[{uint16\+\_\+t}]{y\+\_\+pos,  }\item[{double}]{AvgV }\end{DoxyParamCaption})}



Отображение результата анализа амлитуды принятого сигнала на LCD экране 


\begin{DoxyParams}{Parameters}
{\em x\+\_\+pos} & точка начала отрисовки по оси х \\
\hline
{\em y\+\_\+pos} & точка начала отрисовки по оси y \\
\hline
{\em AvgV} & средняя амплитуда принятого сигнала\\
\hline
\end{DoxyParams}
Выводит на на белом фоне в заданной позиции double с точностью два знака после запятой в формате X.\+XX \Hypertarget{_l_c_d__lib_8c_a58da74816ca00e0067c30b4faaefc366}\label{_l_c_d__lib_8c_a58da74816ca00e0067c30b4faaefc366} 
\index{LCD\_lib.c@{LCD\_lib.c}!offLCD@{offLCD}}
\index{offLCD@{offLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{offLCD()}{offLCD()}}
{\footnotesize\ttfamily void off\+LCD (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Выключение LCD экрана 

Функция выставляет Low уровень на линии LCD\+\_\+\+BL \Hypertarget{_l_c_d__lib_8c_aabad06e989a5bc1992d5d136d02dc6cb}\label{_l_c_d__lib_8c_aabad06e989a5bc1992d5d136d02dc6cb} 
\index{LCD\_lib.c@{LCD\_lib.c}!onLCD@{onLCD}}
\index{onLCD@{onLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{onLCD()}{onLCD()}}
{\footnotesize\ttfamily void on\+LCD (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Включение LCD экрана 

Функция выставляет High уровень на линии LCD\+\_\+\+BL \Hypertarget{_l_c_d__lib_8c_a942a6990076b55062fa3686509ede8fb}\label{_l_c_d__lib_8c_a942a6990076b55062fa3686509ede8fb} 
\index{LCD\_lib.c@{LCD\_lib.c}!setDrawWindow@{setDrawWindow}}
\index{setDrawWindow@{setDrawWindow}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{setDrawWindow()}{setDrawWindow()}}
{\footnotesize\ttfamily void set\+Draw\+Window (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{x1,  }\item[{uint16\+\_\+t}]{y1,  }\item[{uint16\+\_\+t}]{x2,  }\item[{uint16\+\_\+t}]{y2 }\end{DoxyParamCaption})}



Установка окна для отрисовки на LCD экране 


\begin{DoxyParams}{Parameters}
{\em x1} & точка начала отрисовки по оси х \\
\hline
{\em y1} & точка начала отрисовки по оси y \\
\hline
{\em x2} & точка конца отрисовки по оси х \\
\hline
{\em y2} & точка конца отрисовки по оси y\\
\hline
\end{DoxyParams}
Устанавливает прямоугольную область для отрисовки. Выход за пределы области в лучшем случае повлияет только на время отрисовки, в худшем вызовет графические артефакты, но не остановит выполнение программы. \Hypertarget{_l_c_d__lib_8c_ab82572385c650de496f697c0afa2d7cc}\label{_l_c_d__lib_8c_ab82572385c650de496f697c0afa2d7cc} 
\index{LCD\_lib.c@{LCD\_lib.c}!swResetLCD@{swResetLCD}}
\index{swResetLCD@{swResetLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{swResetLCD()}{swResetLCD()}}
{\footnotesize\ttfamily void sw\+Reset\+LCD (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



software перезагрузка LCD экрана 

Функция отправляет команду 0x01 по шине SPI, что вызывает software перезагрузку LCD экрана. Также, согласно документации, после перезагрузки необходимо обеспечить задержку выполнения остальных функций (установлена \texorpdfstring{$\sim$}{\string~}120 мс). \Hypertarget{_l_c_d__lib_8c_a3a4fcfdf4679d8219ab6281e3a7d637b}\label{_l_c_d__lib_8c_a3a4fcfdf4679d8219ab6281e3a7d637b} 
\index{LCD\_lib.c@{LCD\_lib.c}!writeCmdLCD@{writeCmdLCD}}
\index{writeCmdLCD@{writeCmdLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{writeCmdLCD()}{writeCmdLCD()}}
{\footnotesize\ttfamily void write\+Cmd\+LCD (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{cmd }\end{DoxyParamCaption})}



Отправка команды на контроллер LCD экрана ILI9488. 

Функция выставляет Low уровень на линии LCD\+\_\+\+CS и линии LCD\+\_\+\+DC, после чего выполняет отправку команды по SPI. Далее для соблюдения протокола функция выставляет High уровень на линии LCD\+\_\+\+CS \Hypertarget{_l_c_d__lib_8c_abe8aedbfc99ec82625d07c7e027ef5bd}\label{_l_c_d__lib_8c_abe8aedbfc99ec82625d07c7e027ef5bd} 
\index{LCD\_lib.c@{LCD\_lib.c}!writeDataLCD@{writeDataLCD}}
\index{writeDataLCD@{writeDataLCD}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{writeDataLCD()}{writeDataLCD()}}
{\footnotesize\ttfamily void write\+Data\+LCD (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Отправка данных (параметров команд) на контроллер LCD экрана ILI9488. 

Поведение аналогично (\doxylink{_l_c_d__lib_8c_a3a4fcfdf4679d8219ab6281e3a7d637b}{write\+Cmd\+LCD()})\mbox{[}\doxylink{_l_c_d__lib_8c_a3a4fcfdf4679d8219ab6281e3a7d637b}{write\+Cmd\+LCD}\mbox{]}, за исключением того, что при отправке данных на линии LCD\+\_\+\+DC устонавливается High уровень. 

\doxysubsection{Variable Documentation}
\Hypertarget{_l_c_d__lib_8c_a5f071743f113001f88bdc3771ee01a93}\label{_l_c_d__lib_8c_a5f071743f113001f88bdc3771ee01a93} 
\index{LCD\_lib.c@{LCD\_lib.c}!buf@{buf}}
\index{buf@{buf}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{buf}{buf}}
{\footnotesize\ttfamily uint8\+\_\+t buf\mbox{[}LCD\+\_\+\+WIDTH \texorpdfstring{$\ast$}{*}2\mbox{]}}

Содержит данные, передаваемые контроллеру ILI9488 по SPI \Hypertarget{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2}\label{_l_c_d__lib_8c_a0efe09d8a193aa45418e4c33c4f420c2} 
\index{LCD\_lib.c@{LCD\_lib.c}!NoResultCounter@{NoResultCounter}}
\index{NoResultCounter@{NoResultCounter}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{NoResultCounter}{NoResultCounter}}
{\footnotesize\ttfamily uint8\+\_\+t No\+Result\+Counter = 3}

Зависит от количества безрезультатных (сигнал не удалось декодировать) приёмов сигнала подряд. extern переменная, уменьшается в TMR4\+\_\+\+Event\+Callback() с периодом 500ms. Если No\+Result\+Counter = 0 (т.\+е. в течении \texorpdfstring{$\sim$}{\string~}1 секунды не произошло удачного декодирования), то вызывается \doxylink{_l_c_d__lib_8c_ad4fcbc10f1d0f8b3738d929d33386ccc}{LCD\+\_\+\+Show\+\_\+\+No\+\_\+\+Result()} \Hypertarget{_l_c_d__lib_8c_ac24684fc351237f8c32cad80903246bc}\label{_l_c_d__lib_8c_ac24684fc351237f8c32cad80903246bc} 
\index{LCD\_lib.c@{LCD\_lib.c}!NoResultState@{NoResultState}}
\index{NoResultState@{NoResultState}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{NoResultState}{NoResultState}}
{\footnotesize\ttfamily uint8\+\_\+t No\+Result\+State = 0}

Индикация отсутсвия отображения кода на LCD экране. 0 -\/ код на экране примутсвует, 1 -\/ кода нет \Hypertarget{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58}\label{_l_c_d__lib_8c_a426b1bbba3f5653febf394936df25a58} 
\index{LCD\_lib.c@{LCD\_lib.c}!prevCode@{prevCode}}
\index{prevCode@{prevCode}!LCD\_lib.c@{LCD\_lib.c}}
\doxysubsubsection{\texorpdfstring{prevCode}{prevCode}}
{\footnotesize\ttfamily uint16\+\_\+t prev\+Code = 0x999}

Содержит значение предыдущего принятого кода. 0x999 -\/ невозможное значение, поэтому является default 