# QPSK_plus_Freq



## Описание проекта
Прошивка для ручного прибора, используемого для проверки генератора задания кодов ФРМ и АРС 

## Используемые компоненты
Программа написана для платы Geehy APM32F407IG miniboard
Для работы необходимы USART приёмник и модифицированная плата МСД-Т (далее - МСД-ТМ)
МСД-ТМ используется для прибавления к входному сигналу постоянной компоненты
Также используются источники питания на 14В и 3.3В для питания платы МСД-ТМ и Geehy miniboard

## Подключение

### USART:

Rx -> **PA9**

Tx -> **PA10**

GND -> **GND**

```
Параметры USART подключения:
- Baud rate     115200
- Data bits     8
- Stop bits     1
- Parity        None
```

### МСД-ТМ:

Входной сигнал (желтый провод с 3.5мм mini-Jack) -> PC_AUDIO_OUTPUT

```
Входной сигнал также можно подать и с катушки. Для этого необходимо прицепить выходы катушки к 3.5мм коннектору крокодилами
или снять коннектор и скрутить/припаять контакты 
```

Выходной сигнал (черно-белый провод с 3.5мм mini-Jack):
- Сигнал (первая площадка, считая от кончика коннектора) -> **PA0**
- Земля (последняя площадка) -> **GND**

```
К коннектору выходного сигнала рекомендуется прицепляться крокодилами. Выход сделан соответсвующим образом,
чтобы при помощи МСД-ТМ можно было записывать сигнал на линии при помощи ПК, поэтому снимать коннектор не рекомендуется
```

## Работа с устройством

Устройство имеет два режима работы: 
- Режим дешефровки ФРМ кодов 
- Режим частотного анализа, необходимый для определния кодов АРС

Переключение между режимами осуществляется нажатием на кнопку **KEY1**. Перед работой рекомендуется сбросить устройство (кнопка **RESET**)

## Выходные данные

В режиме определения кода ФРМ устройство формирует выходные данные в формате **XX** **С**, 
где XX - 16-ти ричный код, C - количество корректно дешифрованных кодов в посылке (5 максимум)  

```
Пример: сообщение C1 4 означает, что был принят код C1 с результатом 4/5 
```

В режиме частотного анализа устройство формирует выход в следующем виде:

```
 75 Hz ->   0.0 %
125 Hz -> 100.0 %
175 Hz ->   0.0 %
225 Hz ->   0.0 %
275 Hz ->   0.0 %
325 Hz ->   0.0 %
```
Такой выход означает, что на линии присутсвует АРС сигнал с частотой 125 Гц
